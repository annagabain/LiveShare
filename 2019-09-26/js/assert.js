// Generated by CoffeeScript 2.4.1
var Curl, DELETE, GET, PATCH, POST, PUT, _, assert, chai, check, checkAll, curl, okAsserts, range;

chai = require('chai');

_ = require('lodash');

range = _.range;


//assert = chai.assert.deepEqual
okAsserts = '';

assert = function(a, b) {
  var diff, i, j, len, ref, sa, sb;
  sa = JSON.stringify(a);
  sb = JSON.stringify(b);
  sa = sa.replace(/\\/g, '');
  sb = sb.replace(/\\/g, '');
  diff = '';
  ref = range(sa.length);
  for (j = 0, len = ref.length; j < len; j++) {
    i = ref[j];
    if (sa[i] === sb[i]) {
      diff += '=';
    } else {
      diff += '!';
      break;
    }
  }
  if (diff.includes('!')) {
    console.log(okAsserts);
    console.log(sa);
    console.log(diff);
    console.log(sb);
    return okAsserts = '';
  } else {
    return okAsserts += '.';
  }
};

//###
// This file is making asserts about the API.
//###
Curl = require('curl-request');

curl = new Curl();

curl.put = (url) => { // Monkey Patching PUT as it is missing.
  curl._setUrl(url);
  curl.setOpt(curl.libcurl.option.CUSTOMREQUEST, 'PUT');
  return curl._submit();
};

check = async function(url, body, expect, type) {
  var response;
  response = (await curl.setBody(body)[type]('localhost:3000' + url));
  return assert(JSON.parse(response.body), expect);
};

DELETE = function() {
  return check(...arguments, 'delete');
};

POST = function() {
  return check(...arguments, 'post');
};

PUT = function() {
  return check(...arguments, 'put');
};

GET = function() {
  return check(...arguments, 'get');
};

PATCH = function() {
  return check(...arguments, 'patch');
};

//########################### This is the specific part
checkAll = async function() {
  console.clear();
  await DELETE('/todos', {}, []);
  await POST('/todos', {
    text: "buy food"
  }, {
    id: 1,
    text: "buy food",
    done: false
  });
  await POST('/todos', {
    text: "fetch lamps"
  }, {
    id: 2,
    text: "fetch lamps",
    done: false
  });
  await POST('/todos', {
    text: "walk dog"
  }, {
    id: 3,
    text: "walk dog",
    done: false
  });
  await POST('/todos', {
    text: "feed cat"
  }, {
    id: 4,
    text: "feed cat",
    done: false
  });
  await POST('/todos', {
    text: "köp räksmörgåsar"
  }, {
    id: 5,
    text: "köp räksmörgåsar",
    done: false
  });
  await GET('/todos/1', {}, {
    id: 1,
    text: "buy food",
    done: false
  });
  await POST('/todos', {
    text: 'Cut the grass'
  }, {
    id: 6,
    text: "Cut the grass",
    done: false
  });
  await GET('/todos/6', {}, {
    id: 6,
    text: "Cut the grass",
    done: false
  });
  await PUT('/todos/6', {
    text: "Klipp gräset",
    done: true
  }, {
    id: 6,
    text: "Klipp gräset",
    done: true
  });
  await PATCH('/todos/6', {
    done: false
  }, {
    id: 6,
    text: "Klipp gräset",
    done: false
  });
  await PATCH('/todos/6', {}, {
    id: 6,
    text: "Klipp gräset",
    done: false
  });
  await PUT('/todos/6', {
    done: true
  }, {
    id: 6,
    done: true
  });
  await DELETE('/todos/6', {}, {
    id: 6,
    done: true
  });
  return console.log(okAsserts);
};

checkAll();

//###########################

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXNzZXJ0LmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXGFzc2VydC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQSxHQUFBLEVBQUEsS0FBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsQ0FBQSxFQUFBLE1BQUEsRUFBQSxJQUFBLEVBQUEsS0FBQSxFQUFBLFFBQUEsRUFBQSxJQUFBLEVBQUEsU0FBQSxFQUFBOztBQUFBLElBQUEsR0FBTyxPQUFBLENBQVEsTUFBUjs7QUFDUCxDQUFBLEdBQUksT0FBQSxDQUFRLFFBQVI7O0FBQ0osS0FBQSxHQUFRLENBQUMsQ0FBQyxNQUZWOzs7O0FBS0EsU0FBQSxHQUFZOztBQUNaLE1BQUEsR0FBUyxRQUFBLENBQUMsQ0FBRCxFQUFHLENBQUgsQ0FBQTtBQUNSLE1BQUEsSUFBQSxFQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUE7RUFBQSxFQUFBLEdBQUssSUFBSSxDQUFDLFNBQUwsQ0FBZSxDQUFmO0VBQ0wsRUFBQSxHQUFLLElBQUksQ0FBQyxTQUFMLENBQWUsQ0FBZjtFQUNMLEVBQUEsR0FBSyxFQUFFLENBQUMsT0FBSCxDQUFXLEtBQVgsRUFBaUIsRUFBakI7RUFDTCxFQUFBLEdBQUssRUFBRSxDQUFDLE9BQUgsQ0FBVyxLQUFYLEVBQWlCLEVBQWpCO0VBQ0wsSUFBQSxHQUFPO0FBQ1A7RUFBQSxLQUFBLHFDQUFBOztJQUNDLElBQUcsRUFBRyxDQUFBLENBQUEsQ0FBSCxLQUFPLEVBQUcsQ0FBQSxDQUFBLENBQWI7TUFDQyxJQUFBLElBQVEsSUFEVDtLQUFBLE1BQUE7TUFHQyxJQUFBLElBQVE7QUFDUixZQUpEOztFQUREO0VBTUEsSUFBRyxJQUFJLENBQUMsUUFBTCxDQUFjLEdBQWQsQ0FBSDtJQUNDLE9BQU8sQ0FBQyxHQUFSLENBQVksU0FBWjtJQUNBLE9BQU8sQ0FBQyxH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RUFBMkM7SUFBQyxFQUFBLEVBQUcsQ0FBSjtJQUFNLElBQUEsRUFBSztFQUFYLENBQTNDO1NBQ04sT0FBTyxDQUFDLEdBQVIsQ0FBWSxTQUFaO0FBaEJVOztBQWlCWCxRQUFBLENBQUE7O0FBckVBIiwic291cmNlc0NvbnRlbnQiOlsiY2hhaSA9IHJlcXVpcmUgJ2NoYWknXHJcbl8gPSByZXF1aXJlICdsb2Rhc2gnXHJcbnJhbmdlID0gXy5yYW5nZSBcclxuXHJcbiNhc3NlcnQgPSBjaGFpLmFzc2VydC5kZWVwRXF1YWxcclxub2tBc3NlcnRzID0gJydcclxuYXNzZXJ0ID0gKGEsYikgLT5cclxuXHRzYSA9IEpTT04uc3RyaW5naWZ5IGFcclxuXHRzYiA9IEpTT04uc3RyaW5naWZ5IGJcclxuXHRzYSA9IHNhLnJlcGxhY2UgL1xcXFwvZywnJ1xyXG5cdHNiID0gc2IucmVwbGFjZSAvXFxcXC9nLCcnXHJcblx0ZGlmZiA9ICcnXHJcblx0Zm9yIGkgaW4gcmFuZ2Ugc2EubGVuZ3RoXHJcblx0XHRpZiBzYVtpXT09c2JbaV1cclxuXHRcdFx0ZGlmZiArPSAnPScgXHJcblx0XHRlbHNlIFxyXG5cdFx0XHRkaWZmICs9ICchJ1xyXG5cdFx0XHRicmVha1xyXG5cdGlmIGRpZmYuaW5jbHVkZXMgJyEnXHJcblx0XHRjb25zb2xlLmxvZyBva0Fzc2VydHNcclxuXHRcdGNvbnNvbGUubG9nIHNhXHJcblx0XHRjb25zb2xlLmxvZyBkaWZmXHJcblx0XHRjb25zb2xlLmxvZyBzYlxyXG5cdFx0b2tBc3NlcnRzID0gJydcclxuXHRlbHNlIFxyXG5cdFx0b2tBc3NlcnRzICs9ICcuJ1xyXG5cclxuIyMjI1xyXG4jIFRoaXMgZmlsZSBpcyBtYWtpbmcgYXNzZXJ0cyBhYm91dCB0aGUgQVBJLlxyXG4jIyMjXHJcblxyXG5DdXJsID0gcmVxdWlyZSAnY3VybC1yZXF1ZXN0J1xyXG5cclxuY3VybCA9IG5ldyBDdXJsKClcclxuXHJcbmN1cmwucHV0ID0gKHVybCkgPT4gIyBNb25rZXkgUGF0Y2hpbmcgUFVUIGFzIGl0IGlzIG1pc3NpbmcuXHJcblx0Y3VybC5fc2V0VXJsIHVybFxyXG5cdGN1cmwuc2V0T3B0IGN1cmwubGliY3VybC5vcHRpb24uQ1VTVE9NUkVRVUVTVCwgJ1BVVCdcclxuXHRjdXJsLl9zdWJtaXQoKVxyXG4gXHJcbmNoZWNrID0gKHVybCxib2R5LGV4cGVjdCx0eXBlKSAtPlxyXG5cdHJlc3BvbnNlID0gYXdhaXQgY3VybC5zZXRCb2R5KGJvZHkpW3R5cGVdICdsb2NhbGhvc3Q6MzAwMCcgKyB1cmxcclxuXHRhc3NlcnQgSlNPTi5wYXJzZShyZXNwb25zZS5ib2R5KSwgZXhwZWN0XHJcblxyXG5ERUxFVEUgPSAtPlx0Y2hlY2sgLi4uYXJndW1lbnRzLCAnZGVsZXRlJ1xyXG5QT1NUID0gICAtPlx0Y2hlY2sgLi4uYXJndW1lbnRzLCAncG9zdCdcclxuUFVUID0gICAgLT5cdGNoZWNrIC4uLmFyZ3VtZW50cywgJ3B1dCdcclxuR0VUID0gICAgLT5cdGNoZWNrIC4uLmFyZ3VtZW50cywgJ2dldCdcclxuUEFUQ0ggPSAgLT5cdGNoZWNrIC4uLmFyZ3VtZW50cywgJ3BhdGNoJ1xyXG5cclxuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyBUaGlzIGlzIHRoZSBzcGVjaWZpYyBwYXJ0XHJcblxyXG5jaGVja0FsbCA9IC0+XHJcblx0Y29uc29sZS5jbGVhcigpXHJcblx0YXdhaXQgREVMRVRFICcvdG9kb3MnLHt9LCAgICAgICAgICAgICAgICAgICAgICAgIFtdXHJcblx0YXdhaXQgUE9TVCAgICcvdG9kb3MnLHt0ZXh0OlwiYnV5IGZvb2RcIn0sICAgICAgICAge2lkOjEsdGV4dDpcImJ1eSBmb29kXCIsZG9uZTpmYWxzZX1cclxuXHRhd2FpdCBQT1NUICAgJy90b2Rvcycse3RleHQ6XCJmZXRjaCBsYW1wc1wifSwgICAgICB7aWQ6Mix0ZXh0OlwiZmV0Y2ggbGFtcHNcIixkb25lOmZhbHNlfVxyXG5cdGF3YWl0IFBPU1QgICAnL3RvZG9zJyx7dGV4dDpcIndhbGsgZG9nXCJ9LCAgICAgICAgIHtpZDozLHRleHQ6XCJ3YWxrIGRvZ1wiLGRvbmU6ZmFsc2V9XHJcblx0YXdhaXQgUE9TVCAgICcvdG9kb3MnLHt0ZXh0OlwiZmVlZCBjYXRcIn0sICAgICAgICAge2lkOjQsdGV4dDpcImZlZWQgY2F0XCIsZG9uZTpmYWxzZX1cclxuXHRhd2FpdCBQT1NUICAgJy90b2Rvcycse3RleHQ6XCJrw7ZwIHLDpGtzbcO2cmfDpXNhclwifSwge2lkOjUsdGV4dDpcImvDtnAgcsOka3Ntw7ZyZ8Olc2FyXCIsZG9uZTpmYWxzZX1cclxuXHRhd2FpdCBHRVQgICAgJy90b2Rvcy8xJyx7fSwgICAgICAgICAgICAgICAgICAgICAge2lkOjEsdGV4dDpcImJ1eSBmb29kXCIsZG9uZTpmYWxzZX1cclxuXHRhd2FpdCBQT1NUICAgJy90b2Rvcycse3RleHQ6J0N1dCB0aGUgZ3Jhc3MnfSwgICAge2lkOjYsdGV4dDpcIkN1dCB0aGUgZ3Jhc3NcIixkb25lOmZhbHNlfVxyXG5cdGF3YWl0IEdFVCAgICAnL3RvZG9zLzYnLHt9LCAgICAgICAgICAgICAgICAgICAgICB7aWQ6Nix0ZXh0OlwiQ3V0IHRoZSBncmFzc1wiLGRvbmU6ZmFsc2V9XHJcblx0YXdhaXQgUFVUICAgICcvdG9kb3MvNicse3RleHQ6XCJLbGlwcCBncsOkc2V0XCIsZG9uZTp0cnVlfSwge2lkOjYsdGV4dDpcIktsaXBwIGdyw6RzZXRcIixkb25lOnRydWV9XHJcblx0YXdhaXQgUEFUQ0ggICcvdG9kb3MvNicse2RvbmU6ZmFsc2V9LCAgICAgICAgICAgIHtpZDo2LHRleHQ6XCJLbGlwcCBncsOkc2V0XCIsZG9uZTpmYWxzZX1cclxuXHRhd2FpdCBQQVRDSCAgJy90b2Rvcy82Jyx7fSwgICAgICAgICAgICAgICAgICAgICAge2lkOjYsdGV4dDpcIktsaXBwIGdyw6RzZXRcIixkb25lOmZhbHNlfVxyXG5cdGF3YWl0IFBVVCAgICAnL3RvZG9zLzYnLHtkb25lOnRydWV9LCAgICAgICAgICAgICB7aWQ6Nixkb25lOnRydWV9XHJcblx0YXdhaXQgREVMRVRFICcvdG9kb3MvNicse30sICAgICAgICAgICAgICAgICAgICAgIHtpZDo2LGRvbmU6dHJ1ZX1cclxuXHRjb25zb2xlLmxvZyBva0Fzc2VydHNcclxuY2hlY2tBbGwoKVxyXG5cclxuIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG4iXX0=
//# sourceURL=c:\github\LiveShare\2019-09-26\coffee\assert.coffee