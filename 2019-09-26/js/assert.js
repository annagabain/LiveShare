// Generated by CoffeeScript 2.4.1
var Curl, assert, chai, check, checkAll, curl;

chai = require('chai');

assert = chai.assert.deepEqual;

//###
// This file is making asserts about the API.
// Start: node js/assert.js
//###
Curl = require('curl-request');

curl = new Curl();

curl.put = (url) => { // Monkey Patching PUT as it is missing.
  curl._setUrl(url);
  curl.setOpt(curl.libcurl.option.CUSTOMREQUEST, 'PUT');
  return curl._submit();
};

check = async function(type, url, body, expect) {
  var response;
  response = (await curl.setBody(body)[type]('localhost:3000' + url));
  return assert(response.body, JSON.stringify(expect));
};

//########################### This is the specific part
checkAll = async function() {
  await check('delete', '/todos', {}, []);
  await check('post', '/todos/demo', {}, [
    {
      id: 1,
      text: "buy food",
      done: false
    },
    {
      id: 2,
      text: "fetch lamps",
      done: false
    },
    {
      id: 3,
      text: "walk dog",
      done: false
    },
    {
      id: 4,
      text: "feed cat",
      done: false
    },
    {
      id: 5,
      text: "köp räksmörgåsar",
      done: false
    }
  ]);
  await check('get', '/todos/1', {}, {
    id: 1,
    text: "buy food",
    done: false
  });
  await check('post', '/todos', {
    text: 'Cut the grass'
  }, {
    id: 6,
    text: "Cut the grass",
    done: false
  });
  await check('get', '/todos/6', {}, {
    id: 6,
    text: "Cut the grass",
    done: false
  });
  await check('put', '/todos', {
    id: 6,
    text: "Klipp gräset",
    done: true
  }, {
    id: 6,
    text: "Klipp gräset",
    done: true
  });
  await check('patch', '/todos', {
    id: 6,
    done: false
  }, {
    id: 6,
    text: "Klipp gräset",
    done: false
  });
  await check('patch', '/todos', {
    id: 6
  }, {
    id: 6,
    text: "Klipp gräset",
    done: false
  });
  await check('put', '/todos', {
    id: 6,
    done: true
  }, {
    id: 6,
    done: true
  });
  return console.log('Ready!');
};

checkAll();

//###########################

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXNzZXJ0LmpzIiwic291cmNlUm9vdCI6Ii4uIiwic291cmNlcyI6WyJjb2ZmZWVcXGFzc2VydC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLElBQUEsSUFBQSxFQUFBLE1BQUEsRUFBQSxJQUFBLEVBQUEsS0FBQSxFQUFBLFFBQUEsRUFBQTs7QUFBQSxJQUFBLEdBQU8sT0FBQSxDQUFRLE1BQVI7O0FBQ1AsTUFBQSxHQUFTLElBQUksQ0FBQyxNQUFNLENBQUMsVUFEckI7Ozs7OztBQVFBLElBQUEsR0FBTyxPQUFBLENBQVEsY0FBUjs7QUFFUCxJQUFBLEdBQU8sSUFBSSxJQUFKLENBQUE7O0FBRVAsSUFBSSxDQUFDLEdBQUwsR0FBVyxDQUFDLEdBQUQsQ0FBQSxHQUFBLEVBQUE7RUFDVixJQUFJLENBQUMsT0FBTCxDQUFhLEdBQWI7RUFDQSxJQUFJLENBQUMsTUFBTCxDQUFZLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLGFBQWhDLEVBQStDLEtBQS9DO1NBQ0EsSUFBSSxDQUFDLE9BQUwsQ0FBQTtBQUhVOztBQUtYLEtBQUEsR0FBUSxNQUFBLFFBQUEsQ0FBQyxJQUFELEVBQU0sR0FBTixFQUFVLElBQVYsRUFBZSxNQUFmLENBQUE7QUFDUCxNQUFBO0VBQUEsUUFBQSxHQUFXLENBQUEsTUFBTSxJQUFJLENBQUMsT0FBTCxDQUFhLElBQWIsQ0FBbUIsQ0FBQSxJQUFBLENBQW5CLENBQXlCLGdCQUFBLEdBQW1CLEdBQTVDLENBQU47U0FDWCxNQUFBLENBQU8sUUFBUSxDQUFDLElBQWhCLEVBQXNCLElBQUksQ0FBQyxTQUFMLENBQWUsTUFBZixDQUF0QjtBQUZPLEVBakJSOzs7QUF1QkEsUUFBQSxHQUFXLE1BQUEsUUFBQSxDQUFBLENBQUE7RUFDVixNQUFNLEtBQUEsQ0FBTSxRQUFOLEVBQWUsUUFBZixFQUF3QixDQUFBLENBQXhCLEVBQTJCLEVBQTNCO0VBQ04sTUFBTSxLQUFBLENBQU0sTUFBTixFQUFlLGFBQWYsRUFBNkIsQ0FBQSxDQUE3QixFQUFpQztJQUFDO01BQUMsRUFBQSxFQUFHLENBQUo7TUFBTSxJQUFBLEVBQUssVUFBWDtNQUFzQixJQUFBLEVBQUs7SUFBM0IsQ0FBRDtJQUFtQztNQUFDLEVBQUEsRUFBRyxDQUFKO01BQU0sSUFBQSxFQUFLLGFBQVg7TUFBeUIsSUFBQSxFQUFLO0lBQTlCLENBQW5DO0lBQXdFO01BQUMsRUFBQSxFQUFHLENBQUo7TUFBTSxJQUFBLEVBQUssVUFBWDtNQUFzQixJQUFBLEVBQUs7SUFBM0IsQ0FBeEU7SUFBMEc7TUFBQyxFQUFBLEVBQUcsQ0FBSjtNQUFNLElBQUEsRUFBSyxVQUFYO01BQXNCLElBQUEsRUFBSztJQUEzQixDQUExRztJQUE0STtNQUFDLEVBQUEsRUFBRyxDQUFKO01BQU0sSUFBQSxFQUFLLGtCQUFYO01BQThCLElBQUEsRUFBSztJQUFuQyxDQUE1STtHQUFqQztFQUNOLE1BQU0sS0FBQSxDQUFNLEtBQU4sRUFBZSxVQUFmLEVBQTJCLENBQUEsQ0FBM0IsRUFBK0I7SUFBQyxFQUFBLEVBQUcsQ0FBSjtJQUFNLElBQUEsRUFBSyxVQUFYO0lBQXNCLElBQUEsRUFBSztFQUEzQixDQUEvQjtFQUNOLE1BQU0sS0FBQSxDQUFNLE1BQU4sRUFBZSxRQUFmLEVBQXlCO0lBQUMsSUFBQSxFQUFLO0VBQU4sQ0FBekIsRUFBaUQ7SUFBQyxFQUFBLEVBQUcsQ0FBSjtJQUFNLElBQUEsRUFBSyxlQUFYO0lBQTJCLElBQUEsRUFBSztFQUFoQyxDQUFqRDtFQUNOLE1BQU0sS0FBQSxDQUFNLEtBQU4sRUFBZSxVQUFmLEVBQTJCLENBQUEsQ0FBM0IsRUFBK0I7SUFBQyxFQUFBLEVBQUcsQ0FBSjtJQUFNLElBQUEsRUFBSyxlQUFYO0lBQTJCLElBQUEsRUFBSztFQUFoQyxDQUEvQjtFQUNOLE1BQU0sS0FBQSxDQUFNLEtBQU4sRUFBZSxRQUFmLEVBQXlCO0lBQUMsRUFBQSxFQUFHLENBQUo7SUFBTSxJQUFBLEVBQUssY0FBWDtJQUEwQixJQUFBLEVBQUs7RUFBL0IsQ0FBekIsRUFBK0Q7SUFBQyxFQUFBLEVBQUcsQ0FBSjtJQUFNLElBQUEsRUFBSyxjQUFYO0lBQTBCLElBQUEsRUFBSztFQUEvQixDQUEvRDtFQUNOLE1BQU0sS0FBQSxDQUFNLE9BQU4sRUFBZSxRQUFmLEVBQXlCO0lBQUMsRUFBQSxFQUFHLENBQUo7SUFBTSxJQUFBLEVBQUs7RUFBWCxDQUF6QixFQUE0QztJQUFDLEVBQUEsRUFBRyxDQUFKO0lBQU0sSUFBQSxFQUFLLGNBQVg7SUFBMEIsSUFBQSxFQUFLO0VBQS9CLENBQTVDO0VBQ04sTUFBTSxLQUFBLENBQU0sT0FBTixFQUFlLFFBQWYsRUFBeUI7SUFBQyxFQUFBLEVBQUc7RUFBSixDQUF6QixFQUFpQztJQUFDLEVBQUEsRUFBRyxDQUFKO0lBQU0sSUFBQSxFQUFLLGNBQVg7SUFBMEIsSUFBQSxFQUFLO0VBQS9CLENBQWpDO0VBQ04sTUFBTSxLQUFBLENBQU0sS0FBTixFQUFlLFFBQWYsRUFBeUI7SUFBQyxFQUFBLEVBQUcsQ0FBSjtJQUFNLElBQUEsRUFBSztFQUFYLENBQXpCLEVBQTJDO0lBQUMsRUFBQSxFQUFHLENBQUo7SUFBTSxJQUFBLEVBQUs7RUFBWCxDQUEzQztTQUNOLE9BQU8sQ0FBQyxHQUFSLENBQVksUUFBWjtBQVZVOztBQVdYLFFBQUEsQ0FBQTs7QUFsQ0EiLCJzb3VyY2VzQ29udGVudCI6WyJjaGFpID0gcmVxdWlyZSAnY2hhaSdcclxuYXNzZXJ0ID0gY2hhaS5hc3NlcnQuZGVlcEVxdWFsXHJcblxyXG4jIyMjXHJcbiMgVGhpcyBmaWxlIGlzIG1ha2luZyBhc3NlcnRzIGFib3V0IHRoZSBBUEkuXHJcbiMgU3RhcnQ6IG5vZGUganMvYXNzZXJ0LmpzXHJcbiMjIyNcclxuXHJcbkN1cmwgPSByZXF1aXJlICdjdXJsLXJlcXVlc3QnXHJcblxyXG5jdXJsID0gbmV3IEN1cmwoKVxyXG5cclxuY3VybC5wdXQgPSAodXJsKSA9PiAjIE1vbmtleSBQYXRjaGluZyBQVVQgYXMgaXQgaXMgbWlzc2luZy5cclxuXHRjdXJsLl9zZXRVcmwgdXJsXHJcblx0Y3VybC5zZXRPcHQgY3VybC5saWJjdXJsLm9wdGlvbi5DVVNUT01SRVFVRVNULCAnUFVUJ1xyXG5cdGN1cmwuX3N1Ym1pdCgpXHJcbiBcclxuY2hlY2sgPSAodHlwZSx1cmwsYm9keSxleHBlY3QpIC0+XHJcblx0cmVzcG9uc2UgPSBhd2FpdCBjdXJsLnNldEJvZHkoYm9keSlbdHlwZV0gJ2xvY2FsaG9zdDozMDAwJyArIHVybFxyXG5cdGFzc2VydCByZXNwb25zZS5ib2R5LCBKU09OLnN0cmluZ2lmeSBleHBlY3RcclxuXHJcbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMgVGhpcyBpcyB0aGUgc3BlY2lmaWMgcGFydFxyXG5cclxuY2hlY2tBbGwgPSAtPlxyXG5cdGF3YWl0IGNoZWNrICdkZWxldGUnLCcvdG9kb3MnLHt9LFtdXHJcblx0YXdhaXQgY2hlY2sgJ3Bvc3QnLCAgJy90b2Rvcy9kZW1vJyx7fSwgW3tpZDoxLHRleHQ6XCJidXkgZm9vZFwiLGRvbmU6ZmFsc2V9LHtpZDoyLHRleHQ6XCJmZXRjaCBsYW1wc1wiLGRvbmU6ZmFsc2V9LHtpZDozLHRleHQ6XCJ3YWxrIGRvZ1wiLGRvbmU6ZmFsc2V9LHtpZDo0LHRleHQ6XCJmZWVkIGNhdFwiLGRvbmU6ZmFsc2V9LHtpZDo1LHRleHQ6XCJrw7ZwIHLDpGtzbcO2cmfDpXNhclwiLGRvbmU6ZmFsc2V9XVxyXG5cdGF3YWl0IGNoZWNrICdnZXQnLCAgICcvdG9kb3MvMScsIHt9LCB7aWQ6MSx0ZXh0OlwiYnV5IGZvb2RcIixkb25lOmZhbHNlfVxyXG5cdGF3YWl0IGNoZWNrICdwb3N0JywgICcvdG9kb3MnLCB7dGV4dDonQ3V0IHRoZSBncmFzcyd9LCB7aWQ6Nix0ZXh0OlwiQ3V0IHRoZSBncmFzc1wiLGRvbmU6ZmFsc2V9XHJcblx0YXdhaXQgY2hlY2sgJ2dldCcsICAgJy90b2Rvcy82Jywge30sIHtpZDo2LHRleHQ6XCJDdXQgdGhlIGdyYXNzXCIsZG9uZTpmYWxzZX1cclxuXHRhd2FpdCBjaGVjayAncHV0JywgICAnL3RvZG9zJywge2lkOjYsdGV4dDpcIktsaXBwIGdyw6RzZXRcIixkb25lOnRydWV9LCB7aWQ6Nix0ZXh0OlwiS2xpcHAgZ3LDpHNldFwiLGRvbmU6dHJ1ZX1cclxuXHRhd2FpdCBjaGVjayAncGF0Y2gnLCAnL3RvZG9zJywge2lkOjYsZG9uZTpmYWxzZX0sIHtpZDo2LHRleHQ6XCJLbGlwcCBncsOkc2V0XCIsZG9uZTpmYWxzZX1cclxuXHRhd2FpdCBjaGVjayAncGF0Y2gnLCAnL3RvZG9zJywge2lkOjZ9LCB7aWQ6Nix0ZXh0OlwiS2xpcHAgZ3LDpHNldFwiLGRvbmU6ZmFsc2V9XHJcblx0YXdhaXQgY2hlY2sgJ3B1dCcsICAgJy90b2RvcycsIHtpZDo2LGRvbmU6dHJ1ZX0sIHtpZDo2LGRvbmU6dHJ1ZX1cclxuXHRjb25zb2xlLmxvZyAnUmVhZHkhJ1xyXG5jaGVja0FsbCgpXHJcblxyXG4jIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjXHJcbiJdfQ==
//# sourceURL=c:\github\LiveShare\2019-09-26\coffee\assert.coffee